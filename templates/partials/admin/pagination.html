{% if total_pages > 1 %}
<div class="pagination-container">
    <div class="pagination" role="group">
        {% if page > 1 %}
        <button
            class="secondary"
            hx-get="/admin/users/search?page={{ page - 1 }}&page_size=20{% match email %}{% when Some with (val) %}&email={{ val }}{% when None %}{% endmatch %}{% match first_name %}{% when Some with (val) %}&first_name={{ val }}{% when None %}{% endmatch %}{% match last_name %}{% when Some with (val) %}&last_name={{ val }}{% when None %}{% endmatch %}{% match role %}{% when Some with (val) %}&role={{ val }}{% when None %}{% endmatch %}"
            hx-target="#user-list-container"
            hx-swap="innerHTML">
            Previous
        </button>
        {% else %}
        <button class="secondary" disabled>Previous</button>
        {% endif %}

        {% for page_num in 1..=total_pages %}
        {% if page_num == page %}
        <button>{{ page_num }}</button>
        {% else %}
        <button
            class="secondary"
            hx-get="/admin/users/search?page={{ page_num }}&page_size=20{% match email %}{% when Some with (val) %}&email={{ val }}{% when None %}{% endmatch %}{% match first_name %}{% when Some with (val) %}&first_name={{ val }}{% when None %}{% endmatch %}{% match last_name %}{% when Some with (val) %}&last_name={{ val }}{% when None %}{% endmatch %}{% match role %}{% when Some with (val) %}&role={{ val }}{% when None %}{% endmatch %}"
            hx-target="#user-list-container"
            hx-swap="innerHTML">
            {{ page_num }}
        </button>
        {% endif %}
        {% endfor %}

        {% if page < total_pages %}
        <button
            class="secondary"
            hx-get="/admin/users/search?page={{ page + 1 }}&page_size=20{% match email %}{% when Some with (val) %}&email={{ val }}{% when None %}{% endmatch %}{% match first_name %}{% when Some with (val) %}&first_name={{ val }}{% when None %}{% endmatch %}{% match last_name %}{% when Some with (val) %}&last_name={{ val }}{% when None %}{% endmatch %}{% match role %}{% when Some with (val) %}&role={{ val }}{% when None %}{% endmatch %}"
            hx-target="#user-list-container"
            hx-swap="innerHTML">
            Next
        </button>
        {% else %}
        <button class="secondary" disabled>Next</button>
        {% endif %}
    </div>
</div>
{% endif %}
